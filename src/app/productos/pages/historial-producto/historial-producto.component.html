<div class="p-grid layout-dashboard">
    <div class="p-col-12 p-xl-12 p-md-12">

        <p-panel class="mt-2">
            <div class="p-grid">
                <div class="p-col-12 p-mb-12 p-lg-12 p-mb-lg-12">
                    <app-input-busqueda (consultarPorId)="informacionProducto($event)"></app-input-busqueda>
                </div>
                <div *ngIf="cargaInicial" class="p-col-12 p-grid">
                    <div class="p-col-12">
                        <h5 class="p-text-center" style="background: #aa7ea2; color: white;">Datos del producto</h5>
                        <hr>
                    </div>

                    <div class="p-col-12 p-md-6 p-lg-3 "><strong>No parte:
                        </strong>{{productoDetalle.tcProducto.sNoParte}} </div>
                    <div class="p-col-12 p-md-6 p-lg-4 ">
                        <strong>Producto:</strong>{{productoDetalle.tcProducto.sProducto}} </div>
                    <div class="p-col-12 p-md-6 p-lg-5 ">
                        <strong>Descripción:</strong>{{productoDetalle.tcProducto.sDescripcion}} </div>
                    <div class="p-col-12 p-md-6 p-lg-4 "><strong>Marca:</strong>{{productoDetalle.tcProducto.sMarca}}
                    </div>
                    <div class="p-col-12 p-md-6 p-lg-4 ">
                        <strong>Precio:</strong>{{productoDetalle.tcProducto.nPrecioConIva}} </div>
                    <div class="p-col-12 p-md-6 p-lg-4 "><strong>Stock:</strong>{{productoDetalle.nCantidadTotal}}
                    </div>
                </div>
            </div>
        </p-panel>

    </div>


     <!--Gráfica y Tabla de historia de ingreso de prodcutos-->
    <div *ngIf="cargaInicial" class="p-col-12 p-lg-6 p-md-6">
        <div class="card">
            <div class="p-text-center">
                <h3>
                    Gráfica de Historia de precios del Producto</h3>
            </div>
            <div class="p-col-12 p-lg-12">
                <div class="card">
                    <div class=" p-justify-center">
                        <p-chart id="dashboard-chart" type="line" [data]="historiaIngresoGraf" [options]="lineOptions">
                        </p-chart>
                    </div>
                </div>
            </div>
            <div class="card widget-tasks">
                <app-historia-precio-producto [listaHistoriaPrecioProducto]="listaHistoriaPrecioProducto"></app-historia-precio-producto>
            </div>
        </div>
    </div>
   
 
    <!--Tabla de Ubicaciones de los productos-->
    <div *ngIf="cargaInicial" class="p-col-12 p-lg-6 p-md-6">       
            <div class="card">    
                <div class="p-text-center">
                    <h3>Gráfica de productos por bodega</h3>
                </div>
                <div class="p-col-12 p-lg-12">
                    <div class="card">                        
                        <div class="p-grid">
                            <div class="p-col-8 p-offset-2">
                                <div class="box"><p-chart type="pie" [data]="productoBodegaGraf"  [responsive]="true" ></p-chart>
                                </div>
                            </div>
                        </div>
                    </div>      
                </div>   
                <div class="card widget-tasks">
                    <app-modal-productos-bodega [listaProductoBodega]="listaProductoBodega" [stockTotal]="stockTotal" [traspaso]=traspaso>            </app-modal-productos-bodega>
                </div> 
            
        </div>   
        
    </div> 
  
   

  

    <div *ngIf="cargaInicial" class="p-col-12 p-lg-6 p-md-6">
        <div class="card">
            <div class="p-text-center">
                <h3>Gráfica de Ventas del producto por mes</h3>
            </div>
            
            <div class="p-col-12 p-lg-12">
                <div class="card">
                    <div class=" p-justify-center">
                        <p-chart id="dashboard-chart" type="line" [data]="ventaProductoMesGraf" [options]="lineOptions">
                        </p-chart>
                    </div>
                </div>
            </div>

            <div class="p-text-center">
                <h3>Ventas del producto por mes</h3>
            </div>


        
            <p-table #dt [value]="listaProductosVentaMes" [rows]="5" [paginator]="true"
                [globalFilterFields]="['totalVentas','cantidad', 'fechaVenta']" [rowHover]="true" dataKey="id" styleClass="p-datatable-customers"
                currentPageReportTemplate="Mostrar {first} al {last} de {totalRecords} registros" [showCurrentPageReport]="true"
                responsiveLayout="scroll" scrollHeight="200px" styleClass="p-datatable-sm">
                <ng-template pTemplate="caption">
                    <div class="p-d-flex p-flex-column p-flex-md-row p-jc-md-between table-header">
                        <h5 class="p-m-0"></h5>
                        <span class="p-input-icon-left">
                            <i class="pi pi-search"></i>
                            <input pInputText type="text" (input)="dt.filterGlobal($event.target.value, 'contains')"
                                placeholder="Buscar en la tabla" />
                        </span>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
        
                        <th pSortableColumn="totalVentas">Total Ventas <p-sortIcon field="totalVentas"></p-sortIcon></th>        
                        <th pSortableColumn="cantidad">Total Producto<p-sortIcon field="cantidad"></p-sortIcon></th>
                        <th pSortableColumn="fechaVenta">Mes/Año<p-sortIcon field="fechaVenta"></p-sortIcon></th>
                        
        
        
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-ventas>
        
                    <tr>
                        <td>{{ventas.totalVentas | number }}</td>
                        <td>{{ventas.cantidad | number}}</td>
                        <td>{{ventas.fechaVenta}}</td>
                        
        
                    </tr>
                </ng-template>
                <ng-template pTemplate="summary">
                    <div class="p-d-flex p-ai-center p-jc-between">
                        En total hay {{listaProductosVentaMes ? listaProductosVentaMes.length : 0 }} registros.
                    </div>
                </ng-template>
            </p-table>
        </div>
    </div>

    <div *ngIf="cargaInicial" class="p-col-12 p-lg-6 p-md-6 ">
        <div class="p-grid p-dir-col p-nogutter">
            <div class="p-col-12 ">
                <div class="card widget-statistics">
                    <div class="p-text-center">
                        <h3>Ventas del Producto por mes </h3>
                    </div>
                    <div class="p-grid">


                    </div>
                    <p-chart id="dashboard-chart" type="line" [data]="lineData" [options]="lineOptions"></p-chart>
                </div>
            </div>

        </div>
    </div>


    <div *ngIf="cargaInicial" class="p-col-12 p-lg-6 p-md-6">
        <div class="card">

            <div class="p-text-center">
                <h3>Historia de ingreso del Producto</h3>
            </div>
            <div class="p-col-12 p-lg-12">


                <div class="card">

                    <div class=" p-justify-center">
                        <p-chart id="dashboard-chart" type="line" [data]="lineData" [options]="lineOptions">
                        </p-chart>
                    </div>
                </div>


            </div>

        </div>
    </div>

    <div *ngIf="cargaInicial" class="p-col-12 p-lg-6 p-md-6">
        <div class="card">
            <div class="p-text-center">
                <h3>Historia de ingreso del Producto</h3>
            </div>
            <p-table [value]="products" responsiveLayout="scroll" scrollHeight="450px" styleClass="p-datatable-sm">
                <ng-template pTemplate="header">
                    <tr>
                        <th>No Parte</th>
                        <th>Nombre Parte</th>
                        <th>Bodega</th>
                        <th>Ubicación</th>
                        <th>Total_ingreso</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-product>
                    <tr>
                        <td>{{product.code}}</td>
                        <td>{{product.name}}</td>
                        <td>LOCAL</td>
                        <td>100 A</td>
                        <td>28</td>
                    </tr>
                </ng-template>
            </p-table>

        </div>
    </div>





</div>