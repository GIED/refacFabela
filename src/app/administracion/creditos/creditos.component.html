<div class="p-grid">
	<div class="p-col-12">

		<p-toast></p-toast>
		

		<div class="card">
			
			<div class="p-text-center"><h2>Creditos y abonos</h2></div>

			<div class="p-grid p-fluid">
				<div class="p-col-12 p-lg-6">
	
					<div class="card">
						<h3 class="centerText">Gráfico del Balance</h3>
						<div class="p-d-flex p-justify-center">
							<p-chart type="pie" [data]="pieData" [options]="pieOptions" [style]="{'width': '25%'}">
							</p-chart>
						</div>
					</div>
				</div>

				<div class="p-col-12 p-lg-6">
	
					<div class="card">
						<div class="p-text-center"_><h3>Balance General</h3></div>
						<p-table [value]="car" >
							<ng-template pTemplate="header" >
								<tr  >
									<th class="p-text-center" style="background:#ebd282 ;" >
										Deuda Total
									</th>
									<th class="p-text-center" style="background:#ebd282 ;" >
										Abonos
									</th>
									<th class="p-text-center" style="background:#ebd282 ;" >
										Saldo
									</th>
								</tr>
							</ng-template>
							<ng-template pTemplate="body" let-car >
								<tr>
									<td class="p-text-center" >
											{{car.total}}
									</td>
									<td class="p-text-center">
										{{car.abono}}
								</td>
								<td class="p-text-center">
									{{car.saldo}}
							</td>
								</tr>
							</ng-template>
						</p-table>
						<div class="p-col-4 p-offset-4">
						<button pButton pRipple label="Exportar Balance" icon="pi pi-upload" class="p-button-help p-mb-2"
						(click)="dt.exportCSV()"></button></div>
					</div>
				</div>
			</div>

			<p-table #dt [value]="products" [columns]="cols" [rows]="10" [paginator]="true"
				[globalFilterFields]="['name','country.name','representative.name','status']"
				[(selection)]="selectedProducts" [rowHover]="true" dataKey="id" styleClass="p-datatable-customers"
				currentPageReportTemplate="Mostrar {first} al {last} de {totalRecords} registros"
				[showCurrentPageReport]="true">
				<ng-template pTemplate="caption">
					<div class="p-d-flex p-flex-column p-flex-md-row p-jc-md-between table-header">
						<h5 class="p-m-0">Listado de créditos</h5>
						<span class="p-input-icon-left">
							<i class="pi pi-search"></i>
							<input pInputText type="text" (input)="dt.filterGlobal($event.target.value, 'contains')"
								placeholder="Buscar cliente" />
						</span>
					</div>
				</ng-template>
				<ng-template pTemplate="header">
					<tr>
						<th style="width: 3rem">

						</th>
						<th pSortableColumn="name">RFC </th>
						<!--<th>Image</th>-->
						<th pSortableColumn="price">Razón social <p-sortIcon field="price"></p-sortIcon>
						</th>
						<th pSortableColumn="category">Nota <p-sortIcon field="category"></p-sortIcon>
						</th>
						<th pSortableColumn="rating">Monto Credito <p-sortIcon field="rating"></p-sortIcon>
						</th>
						<th pSortableColumn="inventoryStatus">Abonos <p-sortIcon field="inventoryStatus"></p-sortIcon>
						</th>
						<th pSortableColumn="inventoryStatus">Saldo <p-sortIcon field="inventoryStatus"></p-sortIcon>
						</th>
						<th pSortableColumn="inventoryStatus">Fecha Inicio <p-sortIcon field="inventoryStatus"></p-sortIcon>
						</th>
						<th pSortableColumn="inventoryStatus">Fecha Termino <p-sortIcon field="inventoryStatus"></p-sortIcon>
						</th>
						<th pSortableColumn="inventoryStatus">Estatus General <p-sortIcon field="inventoryStatus"></p-sortIcon>
						</th>
						
					</tr>
				</ng-template>
				<ng-template pTemplate="body" let-product>
					<tr>
						<td>

						</td>
						<td><span class="p-column-title">Name</span>
							{{product.name}}
						</td>
						<!--	<td><span class="p-column-title">Image</span>
							<img [src]="'assets/demo/images/product/' + product.image" [alt]="product.name" width="100" class="p-shadow-4" />
						</td>-->
						<td><span class="p-column-title">Price</span>
							PEDRO MANUEL FABELA MARTINEZ
						</td>
						<td><span class="p-column-title">Category</span>
							14987
						</td>
						<td><span class="p-column-title">Reviews</span>
							5,685
						</td>
						<td><span class="p-column-title">Status</span>
							685
						</td>
						<td><span class="p-column-title">Status</span>
							5,000
						</td>
						<td><span class="p-column-title">Status</span>
							01/10/2021
						</td>
						<td><span class="p-column-title">Status</span>
							20/01/2022
						</td>
						<td><span class="p-column-title">Status</span>
							PENDIENTE
						</td>
						<td>
							<button pButton pRipple icon="pi pi-search" class="p-button-rounded p-button-success p-mr-2"
								(click)="editProduct(product)"></button>
							<button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning"
								(click)="deleteProduct(product)"></button>
						</td>
					</tr>
				</ng-template>
				<ng-template pTemplate="summary">
					<div class="p-d-flex p-ai-center p-jc-between">
						En total hay {{products ? products.length : 0 }} clientes.
					</div>
				</ng-template>
			</p-table>
		</div>

		<p-dialog [(visible)]="productDialog" [style]="{width: '450px'}" header="Datos del cliente" [modal]="true"
			styleClass="p-fluid">
			<ng-template pTemplate="content">
				<img [src]="'assets/demo/images/product/' + product.image" [alt]="product.image" class="product-image"
					*ngIf="product.image">
				<div class="p-field">
					<label for="name">RFC</label>
					<input type="text" pInputText id="name" [(ngModel)]="product.name" required autofocus />
					<small class="p-invalid" *ngIf="submitted && !product.name">RFC requerido.</small>
				</div>
				<div class="p-field">
					<label for="description">Razón social</label>
					<textarea id="description" pInputTextarea [(ngModel)]="product.description" required rows="3"
						cols="20"></textarea>
				</div>

				<div class="p-field">
					<label class="p-mb-3">Category</label>
					<div class="p-formgrid p-grid">
						<div class="p-field-radiobutton p-col-6">
							<p-radioButton id="category1" name="category" value="Accessories"
								[(ngModel)]="product.category"></p-radioButton>
							<label for="category1">Accessories</label>
						</div>
						<div class="p-field-radiobutton p-col-6">
							<p-radioButton id="category2" name="category" value="Clothing"
								[(ngModel)]="product.category"></p-radioButton>
							<label for="category2">Clothing</label>
						</div>
						<div class="p-field-radiobutton p-col-6">
							<p-radioButton id="category3" name="category" value="Electronics"
								[(ngModel)]="product.category"></p-radioButton>
							<label for="category3">Electronics</label>
						</div>
						<div class="p-field-radiobutton p-col-6">
							<p-radioButton id="category4" name="category" value="Fitness"
								[(ngModel)]="product.category"></p-radioButton>
							<label for="category4">Fitness</label>
						</div>
					</div>
				</div>

				<div class="p-formgrid p-grid">
					<div class="p-field p-col">
						<label for="price">Price</label>
						<p-inputNumber id="price" [(ngModel)]="product.price" mode="currency" currency="USD"
							locale="en-US"></p-inputNumber>
					</div>
					<div class="p-field p-col">
						<label for="quantity">Quantity</label>
						<p-inputNumber id="quantity" [(ngModel)]="product.quantity"></p-inputNumber>
					</div>
				</div>
			</ng-template>

			<ng-template pTemplate="footer">
				<button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-text"
					(click)="hideDialog()"></button>
				<button pButton pRipple label="Guardar" icon="pi pi-check" class="p-button-text"
					(click)="saveProduct()"></button>
			</ng-template>
		</p-dialog>

		<p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>
	</div>
</div>